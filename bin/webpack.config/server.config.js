"use strict";const e=require("path"),s=require("webpack-node-externals"),{printLog:r}=require("../utils/base"),{config:o}=require("../utils/common"),l=process.cwd();try{e.join(l,o.server,"index.js")}catch(e){r({type:"error",text:"没有找到项目中服务端入口\n"})}const t=e.resolve(l,o.build);module.exports=()=>({target:"node",mode:"development",entry:{server:entryPath},output:{filename:"js/[name].js",path:t,libraryTarget:"commonjs2"},resolve:{extensions:[".js",".vue",".json",".jsx",".scss",".sass",".css",".less"]},module:{rules:[{test:/\.(js|jsx|ts|tsx)$/,exclude:/node_modules/,use:[{loader:require.resolve("babel-loader"),options:{presets:[require.resolve("@babel/preset-env"),require.resolve("@babel/preset-react")],plugins:[[require.resolve("@babel/plugin-proposal-decorators"),{legacy:!0}],require.resolve("@babel/plugin-proposal-optional-chaining"),require.resolve("@babel/plugin-proposal-class-properties"),require.resolve("@babel/plugin-transform-runtime")]}}]},{test:/\.(css|less|scss|sass)$/,exclude:/node_modules/,use:[{loader:require.resolve("./loader/css-remove-loader")}]},{test:/\.(png|jpg|gif|webp)$/,use:[{loader:"url-loader",options:{limit:8192}}]}]},externals:[s()]});
