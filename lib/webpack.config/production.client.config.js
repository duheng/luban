"use strict";require("webpack");const{merge:e}=require("webpack-merge"),s=require("path"),r=require("mini-css-extract-plugin"),t=require("./base.config"),n=require("../plugins/creat-version-plugin"),i=require("../plugins/creat-html-plugin"),{config:u,getTemplate:o}=require("../utils/common");let c=t(u);const a=process.cwd(),l=s.resolve(a,u.build),p="js/[name]@[contenthash].js",m="css/[name]@[contenthash].css";c.module.rules.map((e=>{/css|sass|less/.test(e.use)&&(e.use.shift(),e.use={loader:r.loader,options:{hmr:!0}})}));const g=[new r({filename:m,chunkFilename:m,ignoreOrder:!0}),new n(u),...i("production",c,o)];module.exports=()=>e(c,{output:{path:l,publicPath:u.static[process.env.NODE_ENV],chunkFilename:p,filename:p,clean:!0},target:"web",mode:"production",devtool:"source-map",plugins:g});
