"use strict";const e=require("webpack"),{merge:s}=require("webpack-merge"),r=require("path"),n=require("mini-css-extract-plugin"),u=require("./base.config"),i=require("../plugins/creat-version-plugin"),t=require("../plugins/creat-html-plugin"),{config:c,getTemplate:o}=require("../utils/common");let a=u(c);const l=process.cwd(),p=r.resolve(l,c.build),m="css/[name]@[chunkhash].css";a.module.rules.map((e=>{/css|sass|less/.test(e.use)&&(e.use.shift(),e.use={loader:n.loader,options:{hmr:!0}})}));const h=[new n({filename:m,chunkFilename:m,ignoreOrder:!0}),new e.HashedModuleIdsPlugin,new i(c),...t("production",a,o)];module.exports=()=>s(a,{output:{path:p,publicPath:c.static[process.env.NODE_ENV],chunkFilename:"js/[name]-[chunkhash:8].js",filename:"js/[name]@[chunkhash].js"},target:["web","es5"],mode:"production",devtool:"source-map",plugins:h,performance:{hints:!1}});
