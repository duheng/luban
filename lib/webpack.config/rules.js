"use strict";const e=require("path"),r=require("mini-css-extract-plugin"),{useCache:s,cacheDirectory:o}=require("../utils/buildCache"),l="production"!==process.env.NODE_ENV,a=r=>{const s=e.resolve(__dirname,".babelrc.js");let o=require(s);return r&&o.plugins.push([require.resolve("babel-plugin-import"),{libraryName:"antd",libraryDirectory:"es",style:"less"}],[require.resolve("babel-plugin-import"),{libraryName:"@ant-design",libraryDirectory:"icons",camel2DashComponentName:!1},"@ant-design/icons"]),o},t=[{loader:l?require.resolve("style-loader"):r.loader},{loader:require.resolve("css-loader")}],i=/node_modules|dll|.luban-cache/,u={js:e=>({test:/\.(js|jsx|ts|tsx)$/,exclude:i,use:[{loader:require.resolve("thread-loader")},s&&process.env.NODE_ENV&&{loader:require.resolve("cache-loader-hash"),options:{mode:"hash",cacheDirectory:`${o}/${process.env.NODE_ENV}`}},{loader:require.resolve("babel-loader"),options:{babelrc:!1,compact:!1,...a(!!e.chunkantd)}}].filter(Boolean)}),css:()=>({test:/\.css$/,use:[...t,{loader:require.resolve("postcss-loader"),options:{ident:"postcss",plugins:[require(require.resolve("autoprefixer"))({overrideBrowserslist:["ie >= 10","> 1%","iOS 9","last 3 iOS versions"]})]}}].filter(Boolean)}),less:()=>({test:/\.less$/,exclude:i,use:[...t,{loader:require.resolve("less-loader"),options:{lessOptions:{javascriptEnabled:!0}}}].filter(Boolean)}),scss:()=>({test:/\.(sa|sc)ss$/,exclude:i,use:[...t,{loader:require.resolve("sass-loader")}].filter(Boolean)}),image:e=>({test:/\.(jpe?g|png|gif|ico)$/,loader:require.resolve("url-loader"),options:{limit:e.base64_image_limit,outputPath:e.assets+"/image/",name:"[name]@[hash:8].[ext]"}}),svg:e=>({test:/\.svg/,use:[{loader:require.resolve("file-loader"),options:{outputPath:e.assets+"/svg/",name:"[name]@[hash:8].[ext]"}}]}),media:e=>({test:/\.(eot|woff|otf|ttf|woff2|appcache|mp3|mp4|pdf)(\?|$)/,use:[{loader:require.resolve("url-loader"),options:{outputPath:e.assets+"/other/",name:"[name]@[hash:8].[ext]"}},{loader:require.resolve("file-loader"),options:{outputPath:e.assets+"/other/",name:"[name]@[hash:8].[ext]"}}]})};module.exports=e=>{let r=[];for(let s in u)r.push(u[s](e));return"vue"==e.platform&&r.push({test:/\.vue$/,exclude:i,use:{loader:require.resolve("vue-loader")}}),{rules:r}};
