"use strict";const e=require("path"),s=require("mini-css-extract-plugin"),{useCache:r,cacheDirectory:o}=require("../utils/buildCache"),l=process.cwd(),a="production"!==process.env.NODE_ENV,i=[{loader:a?require.resolve("style-loader"):s.loader},{loader:require.resolve("css-loader")}],t={js:()=>({test:/\.(js|jsx|ts|tsx)$/,exclude:/node_modules/,use:[{loader:require.resolve("thread-loader")},r&&process.env.NODE_ENV&&{loader:require.resolve("cache-loader-hash"),options:{mode:"hash",cacheDirectory:`${o}/${process.env.NODE_ENV}`}},{loader:require.resolve("babel-loader"),options:{babelrc:!1,compact:!1,configFile:e.resolve(__dirname,".babelrc.js")}}].filter(Boolean)}),vue:()=>({test:/\.vue$/,exclude:/node_modules/,use:{loader:require.resolve("vue-loader")}}),css:()=>({test:/\.css$/,use:[...i,{loader:require.resolve("postcss-loader"),options:{ident:"postcss",plugins:[require(require.resolve("autoprefixer"))({overrideBrowserslist:["ie >= 9","> 1%","iOS 7","last 3 iOS versions"]})]}}].filter(Boolean)}),less:()=>({test:/\.less$/,exclude:/node_modules/,use:[...i,{loader:require.resolve("less-loader"),options:{lessOptions:{javascriptEnabled:!0}}}].filter(Boolean)}),scss:()=>({test:/\.(sa|sc)ss$/,exclude:/node_modules/,use:[...i,{loader:require.resolve("sass-loader")}].filter(Boolean)}),image:s=>({test:/\.(jpe?g|png|gif|ico)$/,loader:require.resolve("url-loader"),options:{limit:s.base64_image_limit,name:`${e.resolve(l,s.base)}/${s.assets}/images/[name]-[hash:8].[ext]`}}),media:()=>({test:/\.(eot|woff|otf|svg|ttf|woff2|appcache|mp3|mp4|pdf)(\?|$)/,use:[{loader:require.resolve("url-loader"),options:{name:"[name]-[hash:8].[ext]"}},{loader:require.resolve("file-loader"),options:{name:"[name][hash:8].[ext]"}}]})};module.exports=e=>{let s=[];for(let r in t)s.push(t[r](e));return{rules:s}};
