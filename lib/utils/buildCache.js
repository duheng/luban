"use strict";const e=require("path"),c=require("fs"),r=process.cwd(),{exec:o}=require("child_process"),{config:a}=require("../utils/common"),{cache:n}=a,{skipLubanCache:s=!1,NODE_ENV:l,deploy_type:i}=process.env,h=c.existsSync("/home/q/prj/npm"),u=!("true"==s||1==s||!n),t=h?e.join("/home/q/prj/npm"):e.join(r),p=e.basename(r),m=`.luban-cache/luban-cache-loader/${p}`,$=e.resolve(e.join(t,m)),b=`.luban-cache/luban-cache-dll/${p}`,j=e.resolve(e.join(t,b)),D=`.luban-cache/terser-cache/${p}`,d=e.resolve(e.join(t,D)),q=()=>{o(`rm -rf ${$}`,((e,c,r)=>{})),o(`rm -rf ${d}`,((e,c,r)=>{}))};u||(q(),o(`rm -rf ${j}`,((e,c,r)=>{}))),h&&console.log(`环境变量skipLubanCache的值是: ${s}\n是否有BUILDENV环境变量: ${BUILDENV}\n是否使用缓存模式: ${u}\n缓存路径是: ${$}`),module.exports={useCache:u,cacheDirectory:$,cacheDllDirectory:j,terserCacheDirectory:d,cleanCache:q};
