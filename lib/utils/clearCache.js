"use strict";require("shelljs/global");const e=require("fs"),r=require("path"),s=require("crypto"),{useCache:t,cacheDirectory:c}=require("./buildCache"),n=process.cwd(),i=require(r.join(n,"package.json")),u=e=>s.createHash("md5").update(e).digest("hex"),d=r=>{const s=i&&i.dependencies?i.dependencies:{};if(Object.keys(s).length>0&&e.existsSync(r)){return!((r,s)=>{const t=`${r}/${u(s)}.txt`;return!!e.existsSync(t)})(r,JSON.stringify(s))}return!1};module.exports={changeCache:e=>{if(!t)return;const r=`${c}/${e}`;d(r)&&rm("-rf",`${r}/*`)},setCacheVersion:r=>{if(!t)return;const s=`${c}/${r}`,n=i&&i.dependencies?i.dependencies:{},d=JSON.stringify(n),o=`${s}/${u(d)}.txt`;!e.existsSync(s)&&mkdir("-p",s),!e.existsSync(o)&&touch(o)}};
